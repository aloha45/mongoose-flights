<%- include('../partials/header') %>

<section id="show-page">
  <div>Flight:</div>
  <div><%= flight.airline %></div>
  <div>Departing Airport:</div>
  <div><%= flight.airport %></div>
  <div>Flight Number:</div>
  <div><%= flight.flightNo %></div>
  <div>Depature Time:</div>
  <div><%= flight.departs %></div>
</section>
<br><br>
<h2>Destinations</h2>
<!-- <form id="add-destination-form" method="POST" action="/flights/---ejs flight._id ejs---/destinations">
    <label>Terminal:</label>
        <select name="airport">
            <option value="AUS">Austin, TX</option>
            <option value="CMH">Columbus, OH</option>
            <option value="DEN">Denver, CO</option>
            <option value="JFK">JFK, New York City, NY</option>
            <option value="LAX">Los Angeles, CA</option>
            <option value="LGA">LaGuardia, New York City, NY</option>
        </select><br><br>
    <label>Departure Date & Time:</label>
        <input name="arrival" type="datetime-local">
        <input type="submit" value="Add Terminal">
    </form> -->

    <form id="add-destination-form" method="POST" action="/flights/<%= flight._id %>/destinations">
        <div class="form-group">
          <label>Terminal:</label>
          <select name="airport" class="form-control" id="exampleFormControlSelect1">
            <option value="AUS">Austin, TX</option>
            <option value="CMH">Columbus, OH</option>
            <option value="DEN">Denver, CO</option>
            <option value="JFK">JFK, New York City, NY</option>
            <option value="LAX">Los Angeles, CA</option>
            <option value="LGA">LaGuardia, New York City, NY</option>
          </select>
        </div>
        <div class="form-group">
          <label>Departure Date and Time:</label>
          <input name="arrival" type="datetime-local" class="form-control" id="exampleInputPassword1">
        </div>
        <input type="submit" value="Add Terminal" class="btn btn-info">
      </form>
    <br><br>
    <td><a href="/tickets/<%=flight._id%>/new"	<%- title === 'Add Ticket' ? 'class="active"' : '' %>>
        GET A TICKET</a></td>
    <br><br>
    <% if (flight.destinations.length) { %>
        <table>
            <thead>
                <tr>
                    <th>Flight Created:</th>
                    <th>Destination:</th>
                    <th>Arrival:</th>
                </tr>
            </thead>
            <tbody>
                <% flight.destinations.forEach(function(d) { %>
                    <tr>
                        <td><%= d.createdAt.toLocaleDateString() %></td>
                        <td><%= d.airport %></td>
                        <td><%= d.arrival %></td>
                    </tr>
                <% }); %>
            </tbody>
        </table>
    <% } else { %>
        <h5>No Connections Yet</h5>
    <% } %>
    <% if (tickets.length) { %>
        <table>
            <thead>
                <tr>
                    <th>Ticket Created:</th>
                    <th>Seat Number:</th>
                    <th>Price:</th>
                </tr>
            </thead>
            <tbody>
                <% tickets.forEach(function(t) { %>
                    <tr>
                        <td><%= t.createdAt.toLocaleDateString() %></td>
                        <td><%= t.seat %></td>
                        <td><%= t.price %></td>
                    </tr>
                <% }); %>
            </tbody>
        </table>
    <% } else { %>
        <h5>No Tickets Yet</h5>
    <% } %>
        <%- include('../partials/footer') %>